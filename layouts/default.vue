<template>
  <div>

    <HeadlessDisclosure as="nav" class="bg-teal-900 shadow-md" v-slot="{ open }">
      <div class="mx-auto max-w-7xl px-2 sm:px-6 lg:px-8">
        <div class="relative flex h-16 items-center justify-between">
          <div class="absolute inset-y-0 left-0 flex items-center sm:hidden">
            <!-- Mobile menu button-->
            <HeadlessDisclosureButton
                class="inline-flex items-center justify-center rounded-md p-2 text-gray-400 hover:bg-gray-700 hover:text-white focus:outline-none focus:ring-2 focus:ring-inset focus:ring-white">
              <span class="sr-only">Open main menu</span>
              <Icon name="material-symbols:menu" v-if="!open" class="block h-6 w-6 text-teal-500" aria-hidden="true"/>
              <Icon name="material-symbols:close-rounded" v-else class="block h-6 w-6 text-teal-500" aria-hidden="true"/>
            </HeadlessDisclosureButton>
          </div>
          <div class="flex flex-1 items-center justify-center sm:items-stretch sm:justify-start">
            <div class="flex flex-shrink-0 items-center">
              <NuxtLink to="/chats">
                <svg width="150" height="19" class="fill-teal-500" xmlns="http://www.w3.org/2000/svg">
                  <path
                      d="M4.8 18C4.56 18 4.376 17.944 4.248 17.832C4.136 17.704 4.056 17.56 4.008 17.4L0.527998 6.28797C0.511998 6.20797 0.503998 6.13597 0.503998 6.07197C0.503998 5.92797 0.551998 5.79997 0.647998 5.68797C0.759998 5.57597 0.895998 5.51997 1.056 5.51997H4.152C4.376 5.51997 4.552 5.58397 4.68 5.71197C4.808 5.82397 4.88 5.93597 4.896 6.04797L6.648 11.976L8.496 6.07197C8.528 5.95997 8.608 5.83997 8.736 5.71197C8.864 5.58397 9.048 5.51997 9.288 5.51997H11.184C11.424 5.51997 11.608 5.58397 11.736 5.71197C11.864 5.83997 11.944 5.95997 11.976 6.07197L13.824 11.976L15.576 6.04797C15.608 5.93597 15.688 5.82397 15.816 5.71197C15.944 5.58397 16.12 5.51997 16.344 5.51997H19.44C19.584 5.51997 19.712 5.57597 19.824 5.68797C19.936 5.79997 19.992 5.92797 19.992 6.07197C19.992 6.13597 19.984 6.20797 19.968 6.28797L16.488 17.4C16.424 17.56 16.336 17.704 16.224 17.832C16.112 17.944 15.936 18 15.696 18H13.008C12.768 18 12.584 17.944 12.456 17.832C12.344 17.704 12.256 17.56 12.192 17.4L10.248 11.688L8.28 17.4C8.232 17.56 8.144 17.704 8.016 17.832C7.904 17.944 7.728 18 7.488 18H4.8Z"/>
                  <path
                      d="M24.1676 18.24C23.2876 18.24 22.4956 18.072 21.7916 17.736C21.1036 17.4 20.5596 16.952 20.1596 16.392C19.7756 15.816 19.5836 15.176 19.5836 14.472C19.5836 13.32 20.0476 12.416 20.9756 11.76C21.9196 11.088 23.1756 10.624 24.7436 10.368L27.5036 9.93597V9.76797C27.5036 9.27197 27.4236 8.90397 27.2636 8.66397C27.1196 8.40797 26.8076 8.27997 26.3276 8.27997C25.9916 8.27997 25.7196 8.34397 25.5116 8.47197C25.3036 8.59997 25.1116 8.78397 24.9356 9.02397C24.7756 9.19997 24.5676 9.28797 24.3116 9.28797H20.9276C20.7516 9.28797 20.6156 9.23997 20.5196 9.14397C20.4236 9.04797 20.3836 8.91997 20.3996 8.75997C20.4156 8.47197 20.5356 8.13597 20.7596 7.75197C20.9836 7.35197 21.3276 6.96797 21.7916 6.59997C22.2716 6.21597 22.8876 5.90397 23.6396 5.66397C24.3916 5.40797 25.2956 5.27997 26.3516 5.27997C27.4236 5.27997 28.3436 5.39997 29.1116 5.63997C29.8796 5.87997 30.5116 6.21597 31.0076 6.64797C31.5036 7.07997 31.8716 7.60797 32.1116 8.23197C32.3516 8.83997 32.4716 9.51997 32.4716 10.272V17.376C32.4716 17.552 32.4076 17.704 32.2796 17.832C32.1676 17.944 32.0236 18 31.8476 18H28.3436C28.1836 18 28.0396 17.944 27.9116 17.832C27.7836 17.704 27.7196 17.552 27.7196 17.376V16.608C27.5116 16.928 27.2316 17.208 26.8796 17.448C26.5436 17.688 26.1436 17.88 25.6796 18.024C25.2316 18.168 24.7276 18.24 24.1676 18.24ZM25.5596 15.096C25.9596 15.096 26.3036 15.016 26.5916 14.856C26.8956 14.68 27.1356 14.416 27.3116 14.064C27.4876 13.712 27.5756 13.272 27.5756 12.744V12.576L25.8476 12.912C25.2556 13.024 24.8396 13.192 24.5996 13.416C24.3596 13.624 24.2396 13.856 24.2396 14.112C24.2396 14.304 24.2956 14.472 24.4076 14.616C24.5196 14.76 24.6716 14.88 24.8636 14.976C25.0716 15.056 25.3036 15.096 25.5596 15.096Z"/>
                  <path
                      d="M34.5223 18C34.3463 18 34.1943 17.944 34.0663 17.832C33.9543 17.704 33.8983 17.552 33.8983 17.376V1.58397C33.8983 1.40797 33.9543 1.26397 34.0663 1.15197C34.1943 1.02397 34.3463 0.959969 34.5223 0.959969H38.0983C38.2583 0.959969 38.4023 1.02397 38.5303 1.15197C38.6583 1.26397 38.7223 1.40797 38.7223 1.58397V17.376C38.7223 17.552 38.6583 17.704 38.5303 17.832C38.4023 17.944 38.2583 18 38.0983 18H34.5223Z"/>
                  <path
                      d="M40.8748 18C40.6988 18 40.5468 17.944 40.4188 17.832C40.3068 17.704 40.2508 17.552 40.2508 17.376V1.58397C40.2508 1.40797 40.3068 1.26397 40.4188 1.15197C40.5468 1.02397 40.6988 0.959969 40.8748 0.959969H44.3548C44.5308 0.959969 44.6748 1.02397 44.7868 1.15197C44.9148 1.26397 44.9788 1.40797 44.9788 1.58397V9.50397L47.7148 5.92797C47.7788 5.84797 47.8668 5.75997 47.9788 5.66397C48.0908 5.56797 48.2508 5.51997 48.4588 5.51997H52.4908C52.6508 5.51997 52.7788 5.57597 52.8748 5.68797C52.9868 5.78397 53.0428 5.91197 53.0428 6.07197C53.0428 6.13597 53.0268 6.20797 52.9948 6.28797C52.9788 6.36797 52.9468 6.42397 52.8988 6.45597L49.0828 11.136L53.4988 17.088C53.5788 17.216 53.6188 17.336 53.6188 17.448C53.6188 17.608 53.5628 17.744 53.4508 17.856C53.3548 17.952 53.2268 18 53.0668 18H48.8908C48.6508 18 48.4748 17.952 48.3628 17.856C48.2668 17.744 48.1788 17.656 48.0988 17.592L44.9788 13.272V17.376C44.9788 17.552 44.9148 17.704 44.7868 17.832C44.6748 17.944 44.5308 18 44.3548 18H40.8748Z"/>
                  <path
                      d="M54.657 18C54.481 18 54.329 17.944 54.201 17.832C54.089 17.704 54.033 17.552 54.033 17.376V6.14397C54.033 5.96797 54.089 5.82397 54.201 5.71197C54.329 5.58397 54.481 5.51997 54.657 5.51997H58.209C58.385 5.51997 58.537 5.58397 58.665 5.71197C58.793 5.82397 58.857 5.96797 58.857 6.14397V17.376C58.857 17.552 58.793 17.704 58.665 17.832C58.537 17.944 58.385 18 58.209 18H54.657ZM54.705 3.95997C54.529 3.95997 54.377 3.90397 54.249 3.79197C54.137 3.66397 54.081 3.51197 54.081 3.33597V0.815969C54.081 0.639968 54.137 0.487968 54.249 0.359969C54.377 0.231969 54.529 0.167969 54.705 0.167969H58.161C58.337 0.167969 58.489 0.231969 58.617 0.359969C58.745 0.487968 58.809 0.639968 58.809 0.815969V3.33597C58.809 3.51197 58.745 3.66397 58.617 3.79197C58.489 3.90397 58.337 3.95997 58.161 3.95997H54.705Z"/>
                  <path
                      d="M66.6461 18.24C64.6461 18.24 63.0541 17.728 61.8701 16.704C60.7021 15.664 60.1021 14.08 60.0701 11.952C60.0701 11.888 60.0701 11.808 60.0701 11.712C60.0701 11.6 60.0701 11.52 60.0701 11.472C60.1181 10.144 60.4061 9.02397 60.9341 8.11197C61.4781 7.18397 62.2301 6.47997 63.1901 5.99997C64.1661 5.51997 65.3101 5.27997 66.6221 5.27997C68.0941 5.27997 69.3101 5.57597 70.2701 6.16797C71.2461 6.74397 71.9741 7.51997 72.4541 8.49597C72.9341 9.45597 73.1741 10.536 73.1741 11.736V12.408C73.1741 12.568 73.1101 12.712 72.9821 12.84C72.8541 12.968 72.7021 13.032 72.5261 13.032H65.1341C65.1341 13.032 65.1341 13.048 65.1341 13.08C65.1341 13.112 65.1341 13.144 65.1341 13.176C65.1341 13.56 65.1821 13.904 65.2781 14.208C65.3901 14.496 65.5581 14.728 65.7821 14.904C66.0061 15.064 66.2781 15.144 66.5981 15.144C66.8061 15.144 66.9821 15.112 67.1261 15.048C67.2701 14.984 67.3901 14.904 67.4861 14.808C67.5981 14.696 67.6941 14.592 67.7741 14.496C67.9181 14.352 68.0381 14.264 68.1341 14.232C68.2301 14.184 68.3741 14.16 68.5661 14.16H72.3341C72.4781 14.16 72.5981 14.208 72.6941 14.304C72.8061 14.4 72.8541 14.52 72.8381 14.664C72.8221 14.952 72.6861 15.304 72.4301 15.72C72.1741 16.12 71.7901 16.512 71.2781 16.896C70.7821 17.28 70.1421 17.6 69.3581 17.856C68.5741 18.112 67.6701 18.24 66.6461 18.24ZM65.1341 10.344H68.1101V10.296C68.1101 9.86397 68.0541 9.49597 67.9421 9.19197C67.8301 8.88797 67.6621 8.66397 67.4381 8.51997C67.2141 8.35997 66.9421 8.27997 66.6221 8.27997C66.3021 8.27997 66.0301 8.35997 65.8061 8.51997C65.5821 8.66397 65.4141 8.88797 65.3021 9.19197C65.1901 9.49597 65.1341 9.86397 65.1341 10.296V10.344Z"/>
                  <path
                      d="M92.2421 18C91.1541 18 90.1941 17.84 89.3621 17.52C88.5461 17.2 87.9061 16.68 87.4421 15.96C86.9941 15.224 86.7701 14.256 86.7701 13.056V9.19197H84.8741C84.6981 9.19197 84.5461 9.13597 84.4181 9.02397C84.3061 8.89597 84.2501 8.74397 84.2501 8.56797V6.14397C84.2501 5.96797 84.3061 5.82397 84.4181 5.71197C84.5461 5.58397 84.6981 5.51997 84.8741 5.51997H86.7701V1.58397C86.7701 1.40797 86.8261 1.26397 86.9381 1.15197C87.0661 1.02397 87.2181 0.959969 87.3941 0.959969H90.8741C91.0501 0.959969 91.1941 1.02397 91.3061 1.15197C91.4341 1.26397 91.4981 1.40797 91.4981 1.58397V5.51997H94.5221C94.6981 5.51997 94.8421 5.58397 94.9541 5.71197C95.0821 5.82397 95.1461 5.96797 95.1461 6.14397V8.56797C95.1461 8.74397 95.0821 8.89597 94.9541 9.02397C94.8421 9.13597 94.6981 9.19197 94.5221 9.19197H91.4981V12.648C91.4981 13.112 91.5941 13.48 91.7861 13.752C91.9781 14.008 92.2821 14.136 92.6981 14.136H94.7141C94.8901 14.136 95.0341 14.2 95.1461 14.328C95.2741 14.44 95.3381 14.584 95.3381 14.76V17.376C95.3381 17.552 95.2741 17.704 95.1461 17.832C95.0341 17.944 94.8901 18 94.7141 18H92.2421Z"/>
                  <path
                      d="M100.09 18.24C99.2101 18.24 98.4181 18.072 97.7141 17.736C97.0261 17.4 96.4821 16.952 96.0821 16.392C95.6981 15.816 95.5061 15.176 95.5061 14.472C95.5061 13.32 95.9701 12.416 96.8981 11.76C97.8421 11.088 99.0981 10.624 100.666 10.368L103.426 9.93597V9.76797C103.426 9.27197 103.346 8.90397 103.186 8.66397C103.042 8.40797 102.73 8.27997 102.25 8.27997C101.914 8.27997 101.642 8.34397 101.434 8.47197C101.226 8.59997 101.034 8.78397 100.858 9.02397C100.698 9.19997 100.49 9.28797 100.234 9.28797H96.8501C96.6741 9.28797 96.5381 9.23997 96.4421 9.14397C96.3461 9.04797 96.3061 8.91997 96.3221 8.75997C96.3381 8.47197 96.4581 8.13597 96.6821 7.75197C96.9061 7.35197 97.2501 6.96797 97.7141 6.59997C98.1941 6.21597 98.8101 5.90397 99.5621 5.66397C100.314 5.40797 101.218 5.27997 102.274 5.27997C103.346 5.27997 104.266 5.39997 105.034 5.63997C105.802 5.87997 106.434 6.21597 106.93 6.64797C107.426 7.07997 107.794 7.60797 108.034 8.23197C108.274 8.83997 108.394 9.51997 108.394 10.272V17.376C108.394 17.552 108.33 17.704 108.202 17.832C108.09 17.944 107.946 18 107.77 18H104.266C104.106 18 103.962 17.944 103.834 17.832C103.706 17.704 103.642 17.552 103.642 17.376V16.608C103.434 16.928 103.154 17.208 102.802 17.448C102.466 17.688 102.066 17.88 101.602 18.024C101.154 18.168 100.65 18.24 100.09 18.24ZM101.482 15.096C101.882 15.096 102.226 15.016 102.514 14.856C102.818 14.68 103.058 14.416 103.234 14.064C103.41 13.712 103.498 13.272 103.498 12.744V12.576L101.77 12.912C101.178 13.024 100.762 13.192 100.522 13.416C100.282 13.624 100.162 13.856 100.162 14.112C100.162 14.304 100.218 14.472 100.33 14.616C100.442 14.76 100.594 14.88 100.786 14.976C100.994 15.056 101.226 15.096 101.482 15.096Z"/>
                  <path
                      d="M110.445 18C110.269 18 110.117 17.944 109.989 17.832C109.877 17.704 109.821 17.552 109.821 17.376V1.58397C109.821 1.40797 109.877 1.26397 109.989 1.15197C110.117 1.02397 110.269 0.959969 110.445 0.959969H114.021C114.181 0.959969 114.325 1.02397 114.453 1.15197C114.581 1.26397 114.645 1.40797 114.645 1.58397V17.376C114.645 17.552 114.581 17.704 114.453 17.832C114.325 17.944 114.181 18 114.021 18H110.445Z"/>
                  <path
                      d="M116.797 18C116.621 18 116.469 17.944 116.341 17.832C116.229 17.704 116.173 17.552 116.173 17.376V1.58397C116.173 1.40797 116.229 1.26397 116.341 1.15197C116.469 1.02397 116.621 0.959969 116.797 0.959969H120.277C120.453 0.959969 120.597 1.02397 120.709 1.15197C120.837 1.26397 120.901 1.40797 120.901 1.58397V9.50397L123.637 5.92797C123.701 5.84797 123.789 5.75997 123.901 5.66397C124.013 5.56797 124.173 5.51997 124.381 5.51997H128.413C128.573 5.51997 128.701 5.57597 128.797 5.68797C128.909 5.78397 128.965 5.91197 128.965 6.07197C128.965 6.13597 128.949 6.20797 128.917 6.28797C128.901 6.36797 128.869 6.42397 128.821 6.45597L125.005 11.136L129.421 17.088C129.501 17.216 129.541 17.336 129.541 17.448C129.541 17.608 129.485 17.744 129.373 17.856C129.277 17.952 129.149 18 128.989 18H124.813C124.573 18 124.397 17.952 124.285 17.856C124.189 17.744 124.101 17.656 124.021 17.592L120.901 13.272V17.376C120.901 17.552 120.837 17.704 120.709 17.832C120.597 17.944 120.453 18 120.277 18H116.797Z"/>
                  <path
                      d="M130.579 18C130.404 18 130.252 17.944 130.124 17.832C130.012 17.704 129.956 17.552 129.956 17.376V6.14397C129.956 5.96797 130.012 5.82397 130.124 5.71197C130.252 5.58397 130.404 5.51997 130.579 5.51997H134.132C134.307 5.51997 134.46 5.58397 134.588 5.71197C134.716 5.82397 134.78 5.96797 134.78 6.14397V17.376C134.78 17.552 134.716 17.704 134.588 17.832C134.46 17.944 134.307 18 134.132 18H130.579ZM130.628 3.95997C130.452 3.95997 130.3 3.90397 130.172 3.79197C130.06 3.66397 130.004 3.51197 130.004 3.33597V0.815969C130.004 0.639968 130.06 0.487968 130.172 0.359969C130.3 0.231969 130.452 0.167969 130.628 0.167969H134.084C134.26 0.167969 134.411 0.231969 134.54 0.359969C134.668 0.487968 134.732 0.639968 134.732 0.815969V3.33597C134.732 3.51197 134.668 3.66397 134.54 3.79197C134.411 3.90397 134.26 3.95997 134.084 3.95997H130.628Z"/>
                  <path
                      d="M142.569 18.24C140.569 18.24 138.977 17.728 137.793 16.704C136.625 15.664 136.025 14.08 135.993 11.952C135.993 11.888 135.993 11.808 135.993 11.712C135.993 11.6 135.993 11.52 135.993 11.472C136.041 10.144 136.329 9.02397 136.857 8.11197C137.401 7.18397 138.153 6.47997 139.113 5.99997C140.089 5.51997 141.233 5.27997 142.545 5.27997C144.017 5.27997 145.233 5.57597 146.193 6.16797C147.169 6.74397 147.897 7.51997 148.377 8.49597C148.857 9.45597 149.097 10.536 149.097 11.736V12.408C149.097 12.568 149.033 12.712 148.905 12.84C148.777 12.968 148.625 13.032 148.449 13.032H141.057C141.057 13.032 141.057 13.048 141.057 13.08C141.057 13.112 141.057 13.144 141.057 13.176C141.057 13.56 141.105 13.904 141.201 14.208C141.313 14.496 141.481 14.728 141.705 14.904C141.929 15.064 142.201 15.144 142.521 15.144C142.729 15.144 142.905 15.112 143.049 15.048C143.193 14.984 143.313 14.904 143.409 14.808C143.521 14.696 143.617 14.592 143.697 14.496C143.841 14.352 143.961 14.264 144.057 14.232C144.153 14.184 144.297 14.16 144.489 14.16H148.257C148.401 14.16 148.521 14.208 148.617 14.304C148.729 14.4 148.777 14.52 148.761 14.664C148.745 14.952 148.609 15.304 148.353 15.72C148.097 16.12 147.713 16.512 147.201 16.896C146.705 17.28 146.065 17.6 145.281 17.856C144.497 18.112 143.593 18.24 142.569 18.24ZM141.057 10.344H144.033V10.296C144.033 9.86397 143.977 9.49597 143.865 9.19197C143.753 8.88797 143.585 8.66397 143.361 8.51997C143.137 8.35997 142.865 8.27997 142.545 8.27997C142.225 8.27997 141.953 8.35997 141.729 8.51997C141.505 8.66397 141.337 8.88797 141.225 9.19197C141.113 9.49597 141.057 9.86397 141.057 10.296V10.344Z"/>
                  <path
                      d="M82.5 11.5C82.5 13.433 80.933 15 79 15C77.067 15 75.5 13.433 75.5 11.5C75.5 9.56697 77.067 7.99997 79 7.99997C80.933 7.99997 82.5 9.56697 82.5 11.5Z"/>
                </svg>
              </NuxtLink>
            </div>
            <div class="hidden sm:ml-6 sm:block">
              <div class="flex space-x-4">
                <NuxtLink v-for="item in navigation" :to="item.path"
                          :class="[IsCurrentPage(item.pathName) ? 'bg-teal-700 text-white' : 'text-white hover:bg-teal-600 hover:text-white', 'px-3 py-2 rounded-md text-sm font-medium']"
                          :aria-current="IsCurrentPage(item.pathName) ? 'page' : undefined">{{ item.name }}
                </NuxtLink>
              </div>
            </div>
          </div>
          <div class="absolute inset-y-0 right-0 flex items-center pr-2 sm:static sm:inset-auto sm:ml-6 sm:pr-0">
            <button type="button">
              <span class="sr-only">View notifications</span>
              <Icon name="tabler:bell" class="text-2xl text-teal-300" aria-hidden="true"/>
            </button>
            <HeadlessMenu as="div" class="relative ml-3">
              <div>
                <HeadlessMenuButton
                    class="flex rounded-full bg-gray-800 text-sm focus:outline-none focus:ring-2 focus:ring-white focus:ring-offset-2 focus:ring-offset-gray-800">
                  <span class="sr-only">Open user menu</span>
                  <img class="h-8 w-8 rounded-full" :src="auth.photoURL" referrerpolicy="no-referrer" alt=""/>
                </HeadlessMenuButton>
              </div>
              <transition enter-active-class="transition ease-out duration-100"
                          enter-from-class="transform opacity-0 scale-95"
                          enter-to-class="transform opacity-100 scale-100"
                          leave-active-class="transition ease-in duration-75"
                          leave-from-class="transform opacity-100 scale-100"
                          leave-to-class="transform opacity-0 scale-95">
                <HeadlessMenuItems
                    class="absolute right-0 z-10 mt-2 w-48 origin-top-right rounded-md bg-white py-1 shadow-lg ring-1 ring-black ring-opacity-5 focus:outline-none">
                  <HeadlessMenuItem v-slot="{ active }">
                    <NuxtLink to="/profile"
                              :class="[active ? 'bg-gray-100' : '', 'block px-4 py-2 text-sm text-gray-700']">Your
                      Profile
                    </NuxtLink>
                  </HeadlessMenuItem>
                  <HeadlessMenuItem v-slot="{ active }">
                    <NuxtLink @click="useSignOut"
                              :class="[active ? 'bg-gray-100' : '', 'block px-4 py-2 text-sm text-gray-700 cursor-pointer']">Sign out
                    </NuxtLink>
                  </HeadlessMenuItem>
                </HeadlessMenuItems>
              </transition>
            </HeadlessMenu>
          </div>
        </div>
      </div>

      <HeadlessDisclosurePanel class="sm:hidden">
        <div class="space-y-1 px-2 pt-2 pb-3">
          <HeadlessDisclosureButton v-for="item in navigation" :key="item.name" as="a" :href="item.path"
                                    :class="[IsCurrentPage(item.pathName) ? 'bg-gray-900 text-white' : 'text-gray-300 hover:bg-gray-700 hover:text-white', 'block px-3 py-2 rounded-md text-base font-medium']"
                                    :aria-current="[IsCurrentPage(item.pathName) ? 'page' : undefined]">{{ item.name }}
          </HeadlessDisclosureButton>
        </div>
      </HeadlessDisclosurePanel>
    </HeadlessDisclosure>

    <NuxtPage/>
  </div>
</template>

<script setup lang="ts">
import {useRoute} from "#imports";
import {useAuthUser, useSignOut} from "~/composables/auth.cient";

const auth = await useAuthUser()

function IsCurrentPage(page: string): boolean {
  return useRoute().name == page
}

interface INav {
  name: string
  path: string
  pathName: string
}

const navigation: Array<INav> = [{
  name: "Chats", path: "/chats", pathName: "chats"
}, {
  name: "FAQ", path: "/faq", pathName: "faq"
}]
</script>
